# PGW (Packet Gateway) - Упрощённая модель сетевого компонента

## 1. Цель проекта
Разработать упрощённую модель PGW, способную:
- Обрабатывать UDP-запросы с IMSI абонентов
- Управлять сессиями (создание/удаление)
- Вести CDR-журнал (Call Detail Record)
- Предоставлять HTTP API для мониторинга
- Поддерживать чёрный список IMSI
- Обеспечивать graceful shutdown

## 2. Архитектура решения

### Основное приложение: `pgw_server`
| Компонент               | Функционал                                                                 |
|-------------------------|---------------------------------------------------------------------------|
| UDP-сервер              | Приём пакетов с IMSI, отправка ответов ('created'/'rejected')             |
| Менеджер сессий         | Управление жизненным циклом сессий (таймаут)                              |
| CDR-журнал              | Запись действий в формате: `timestamp, IMSI, action`                     |
| HTTP API                | 2 эндпоинта: `/check_subscriber` и `/stop`                               |
| Чёрный список           | Автоматический отказ для IMSI из списка                                   |
| Логирование             | Запись ключевых событий в файл лог                                       |
| Конфигурация            | Чтение параметров из JSON (порты, таймауты, пути к файлам)               |

### Тестовое приложение: `pgw_client`
| Функционал              | Описание                                                                  |
|-------------------------|---------------------------------------------------------------------------|
| CLI-интерфейс           | Запуск с передачей IMSI (`./pgw_client 001010123456789`)                 |
| UDP-коммуникация        | Отправка запроса и получение ответа от сервера                           |
| Логирование             | Запись событий в файл лог                                               |

## 3. Форматы данных

### UDP-протокол
- **Запрос**: IMSI в BCD-кодировке (TS 29.274 §8.3)
- **Ответ**: ASCII-строка `created` или `rejected`
### CDR-журнал
Строка в формате: timestamp, IMSI, action
Пример записи: 
`2025-07-27 13:32:06,001010123456786,create`
`2025-07-27 13:32:20,001010123456786,offload`


